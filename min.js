_='~ SfxrParams(`setSettings=~(^b=0;24>b;b++)this[String.fromCharCode(97+b)]=a[b]||0;.01>`c(`c=.01a=`b+`c+`e18>a=.18/a,`b*=a,`c*=a,`e*=a}~ SfxrSynth(`_params=SfxrParams;^a,b,c,d,e,g,n,p,m,r,v,h;`reset=~(^a=`_params;d=100/.f*a.f+.001e=100/.g*a.g+.001g=1-a.h*a.h*a.h*.01,n=-a.i*a.i*a.i*1e-6,a.a||(v=.5-a.n/2,h=5e-5*-a.op=1+a.l*a.l*(0<a.l?-.9:10m=r=1==a.m?0:(1-a.m)*(1-a.m)*2e4+32},`totalReset=~(`reset();^g=`_params;a=g.b*g.b*1e5,b=g.c*g.c*1e5,c=g.e*g.e*1e5+12,3*(+b+c)/3|0,`synthWave=~(x,y^f=`_params,u=1!=f.s||f.v,t=f.v*f.v*.1,z=1+3e-4*f.w,k=f.s*f.s*f.s*.1,w=1+1e-4*f.t,B=1!=f.s,L=f.x*f.x,aa=f.g,S=f.q||f.r,ba=f.r*f.r*f.r*.2,T=f.q*f.q*(0>f.q?-1020:1020U=f.p?((1-f.p)*(1-f.p)*2e4|0)+32:ca=f.d,V=f.j/2,da=f.k*f.k*.01,O=f.a,P=a,ea=1/a,fa=1/b,ha=1/c;f=5/(1+f.u*f.u*20)*(.01+kf>.8(f=.8f=1-f;(^I,A,E,q,F,Q=!1,W=G=H=X=M=J=D=R=Y=Z=N=Array(1024K=Array(32C=N;C--;)N[C]=0;(C=K;C--;)K[C]=2*Math.random()-1;(C=0;y>C;C++if(Q)C;if(U++Y>=U(Y=`reset()r++m>=r(r=d*=pg+=n,d*=g,d>e(d=e,aa>0(Q=!0)A=d,V>0(Z+=da,A*=1+Math.sin(Z)*VA|=8>A(A=8O||(v+=h,0>v?v=0:v>.5(v=.5)++G>P)switch(G=++Wcase 1:P=b 2:P=c}switch(Wcase 0:H=G*ea 1:H=1+2*(1-G*fa)*ca 2:H=1-G*ha 3:H=Q=!0}S(T+=ba,E=0|T,0>E?E=-E:E>1023(E=1023)uz(t*=z,1e-5>t?t=1e-5:t>.1(t=.1)F=0;(^ia=8;ia--;if(D++,D>=A(D%=A,3==O))(I=K;I--;)K[I]=2*Math.random()-1;switch(Ocase 0:q=v>D/A?.5:-.5 1:q=1-D/A*2 2:q=D/A,q=6.28318531*(q>.5?q-1:qq=1.27323954*q+.405284735*q*q*(0>q?1:-1q=.225*((0>q?-1:1)*q*q-q)+q 3:q=K[Math.abs(32*D/A|0)]}u(I=J,k*=w,0>k?k=0:k>.1(k=.1B?(M+=(q-J)*k,M*=f):(J=q,M=0J+=M,X+=J-I,q=X*=1-tS(N[R%1024]=q,q+=N[(R-E+1024)%1024],R++F+=q}F*=.125*H*L,x[C]=F>=1?32767:-1>=F?-32768:32767*F|0}y}}~ ,bMath.floor(Math.random()*(b-a))+a}~ pause,ba.bind(thisb~ rdMath.r~ css,b(^c in b)a.style[c]=b[c]}~ crea,b^c=documt.creaElemt);bc.setAttribu("id",bc}~ removea.partNode.removeChild~ $documt.getElemtById~ initS(ss.Each(~^c=jsfxrd=;d.src=c,sLib.push(d~ init(gridPositions=[];(^a=1;columns-1>a;a++)(^b=1;rows-1>b;b++)(1!=a2!=a||6!=b)(1!=a2!=a||7!=b)(0!=a1!=a2!=a||5!=b)gridPositions.push([a,b]);(board=[],emies=[],object=[],b=$("scre").childr,a=l=b;a<l;a++)b[a]b[a].partNodeb[a].partNode.removeChild(b[a]);=-1;columns+1>a;a++)(b=-1;rows+1>b;b++^c);c.bI(floorTiles[(floorTiles)]-1!==aa!==columns-1!==bb!==rows||c.bI(ourWallTiles[(ourWallTiles)]board.push([c,a,b,"t"]aa.bI(20board.push([a,columns-1,0]o=layoutOAtRandom(wallTiles,5,1"w"o=o.concat(layoutOAtRandom(foodTiles,1,5,"f")a=0|Math.log2(levelemies=layoutOAtRandom(emyTiles,a,a,"e",{i:[1,2,3,4,5],a:[28,29],v:4}aa.cI(0a.aA({i:[1,2,3,4,5],a:[32,33],d:[38,39],v:6}a.cA("i"p=[a,rows-1,"p"],scre=$("scre"score=crea("div","score"score.innerHTML="<p>ergy: "++"</p>",scre.appdChild(scorescore.upda=~(score.innerHTML="<p>ergy: "++"</p>"}}~ drawIma[0].dw([1]+1)*SYS_spriParams.w,[2]+1)*SYS_spriParams.h~ launchDectIcon(^a);a.bI(46a.aA({i:[1,0],v:8}a.cA("i"dection=[a,p[1]+.5,p[2]-.5,"!"],pause(~(dection[0].k(dection=null},1e3sLib[0].play(~ layoutOAtRandom,b,c,d,eb=(b,c+1c=[];(^g=0;b>g;g++^n=randomPosition(pm=(ar=a[m];if(p.bI(r"e"!==d)m=[p,n[0],n[1],d,2],"f"===d(m[4]=19===r?FRUIT_ENERGY:SODA_ENERGYc.push(m);else{^v=Object.assign({},e);12==r(v.a=[24,25]p.aA(vp.cA("i"n=[p,n[0],n[1],d],(6==r||12==r)(n[4]=emyHit[m],n[5]=emyAI[m]n[3]=d,c.push(n}c}~ atmptMove,b^c=a[1];"r"==bc++,"l"==bc--;^d=a[2];"u"==bd--,"d"==bd++;(^e=0;e<emies;e++)if(emies[e][1]==cemies[e][2]==d"f"!==emies[e][3])return"n";(e=0;e<o;e++)if(o[e][1]==co[e][2]==d)o[e];p[1]==cp[2]==d?p:"y"}~ damagea[4]--,1==a[4]a[0].cI[0].i()+150>=a[4][3]="r",a[0].k(gameCallback(EVT_WALL_DESTROYED)~ doAnima,banimating=!0;^c=atmptMove,b);if("n"===c)dCharacrMove);else if("w"===c[3]||"p"===c[3]if("p"===c[3]c[0].cA("d"gameCallback(EVT_PLAYER_DAMAGE,a[4]);^d=!0;sLib[1].play(if("w"===c[3]^e=(1,4);if(!=a2>e)void dCharacrMove);damage(csLib[2].play(a[0].cA("a"pause(~(a[0].cA("i"dc[0].cA("i"dCharacrMove,500else{e=a[1];^g=a[2];switch(bcase"l":0<a[1](e--,a[0].diff(-1,0playWalkS())"r":a[1]<columns-1(e++,a[0].diff(1,0playWalkS())"u":0<a[2](g--,a[0].diff(-1playWalkS())"d":a[2]<rows-1(g++,a[0].diff(1playWalkS()dCharacrMove,e,g}~ playWalkS(sLib[4].play(~ randomPosition(^a=(gridPositions);gridPositions.splice,1)[0]}~ decideMovemt^b=["l","r","u","d"],c="";Math.abs[1]-p[1])+Math.abs[2]-p[2])<=a[5]?(dection||||(=a,launchDectIcon()a[2]>p[2]?c="u":a[2]<p[2](c="d"""===c[1]>p[1]?c="l":a[1]<p[1](c="r"))):(c=b[(b)],==a(=null)doAnima,c~ checkCurrtTile(o.Each(~,ba[1]===p[1]a[2]===p[2]?(+=a[4],sLib[3].play(o.splice(b,1a[0].k(!1):void 0}p[1]===columns-10===p[2]?!0:void 0}~ checkMaxEnergy(>maxEnergy(maxEnergy=~ checkGameOver(0>=(gameIsOver=!GAMEOVER~ gameLoop(^a=+Da,b=a-oldTime;switch(oldTime=a,gameStacase STATE_INIT_MUSIC:title.innerHTML="<p>ROGUE SCAVENGER 13Kvoid raf(gameLoop);case STATE_INITIALIZATION:gameIsOver=!1,=null,=maxEnergy=initialEnergy,level=INIT_LEVEL,init(TITLE_SCREEN STATE_PLAYING:if(isPTurn!isPMoving)checkMaxEnergy(checkGameOver(handleKeys();else if(!isPTurn!isEnemyMoving^c=emiesToMove.pop();c?(pause(~(decideMovemt(c,250isEnemyMoving=!0):isPTurn=!0}break;case STATE_TITLE_SCREEN:^d=window.speechSynthesis;pause(~(^a=d.getVoices(b=0;a.Each(~,c0<=a.lang.indexOf("")"Google UK English Male"==a.name(b=c);^c=SpeechSynthesisUtrance("Day "+level+". "+(storyline[level-1]||""));c.voice=a[b],c.pitch=.5,c.ra=.8,d.speak(c,500title.innerHTML="<p>DAY "+level+".</p><p class=\'small\'>"+(storyline[level-1]||"")+"STANDBY,pause(~(init(scre.style.display="block",title.style.display="none",PLAYING},2500) STATE_GAMEOVER:a=level>=l?cagories[l-1]:cagories[level]||cagories[0],title.innerHTML="<p>You DIED</p><p class=\'small\'>of starvation afr "+level+" days.<br/>You managed to have "+maxEnergy+" food.<br/>"+a+" scavger.<br/><a href=\'https://twitr.com/innt/tweet?url=http://www.js13kgames.com/rogue-scavger13k&xt="+("I died of starvation afr "+level+" days of zombie apocalypse. I am a "+a+" scavger.")+" #js13k #scavger13k\' target=\'_blank\'>TWEET IT!</a>STANDBY}updaLoop(bdrawLoop(raf(gameLoop~ gameCallback,bswitchcase EVT_PLAYER_ENDED_MOVE:--,checkCurrtTile()?(isPTurn=!isPMoving=!1,=null,sLib[5].play(pause(~(level++,TITLE_SCREEN},1e3)):pause(~(isPMoving=isPTurn=!1,emiesToMove=emies.slice(0,250score.upda() EVT_ENEMY_ENDED_MOVE:isEnemyMoving=!1 EVT_PLAYER_DAMAGE:-=b,score.upda() EVT_WALL_DESTROYED:(^c=0;c<o;c++)if("r"===o[c][3]o.splice(c,1);break}}}~ updaLoopif(p[0].mvanimating^b=p[0].dxy();p[1]+=b[0]*a,p[2]+=b[1]*a}emies.Each(~(bif(b[0].mvanimating^c=b[0].dxy();b[1]+=c[0]*a,b[2]+=c[1]*a}}dectiondection[0].mv~ handleKeys(isPMoving=!keys[0]?doAnima(p,"l"):keys[2]?doAnima(p,"r"):keys[1]?doAnima(p,"u"):keys[3]?doAnima(p,"d"):isPMoving=!1}~ dCharacrMove,b,cpause(~(animating=!1,a[0].diff(0b[1]=bc[2]=ca[1]=rd[1]a[2]=rd[2]gameCallback("p"==a[3]?EVT_PLAYER_ENDED_MOVE:EVT_ENEMY_ENDED_MOVE,500~ drawLoop(board.Each(drawImo.Each(drawImemies.Each(drawImdrawIm(pdectiondrawIm(dection~ switchMusic(gainNode.gain.value=-1==gainNode.gain.value?-.84:-1}^synth=SfxrSynth;window.jsfxr=~synth._params.setSettings);^b=synth.totalReset();a=Uint8Array(4*((b+1)/2|0)+44b=2*synth.synthWave(Uint16Array.buffer,44b);^c=Uint32Array.buffer,44);c[0]=117901141c[1]=b+36,c[2]=1163280727,c[3]=544501094,c[4]=16,c[5]=65537,c[6]=4410c[7]=8820c[8]=1048578,c[9]=163501706c[10]=b,b+=44,c=0;(^d="data:audio/wav;base64,";b>c;c+=3^e=a[c]<<16|a[c+1]<<8|a[c+2];d+=@e>>18]+@e>>12&63]+@e>>6&63]+@63&e]}d};^sonantx;!~(~ aMath.sin(6.283184*a~ b,c~(^g=Uint8Array(4*ab=g-2,n=~((^a=Da,p=0;b>=0;)if(g[b]=g[b+1]=128,b-=2,p+=1,0===p%1e333<Da-a)void n,0);~(c(g,0;n,0,0~ c,b,c,m,d^g=c.fx_delay_time*m>>1,n=c.fx_delay_amt/255,p=e=~((^c=Da,m=0;b-g>p;^r=4*p,h=4*(p+gk=a[h]+[h+1]<<8)+[r+2]+[r+3]<<8)-32768)*n;if[h]=255&k,a[h+1]=k>>8&255,k=a[h+2]+[h+3]<<8)+[r]+[r+1]<<8)-32768)*n,a[h+2]=255&k,a[h+3]=k>>8&255,++p,m+=1,0===m%1e333<Da-c)void e,0d,0;e,0sonantx={};^d=null,e=[a,~(c0>a(c)?-1:1},~a%1-.5},~a=a%1*4,2>a?a-1:3-a}];	=~`mixBuf=a,`waveSize=a/2/2},getWave=~(^a=`mixBuf,c=4*`waveSize,b=c-8,m=b-36,e=String.fromCharCode(82,73,77255&b,b>>8&255,b>>16&255,b>>24&255,87,65,86,69,102,109,116,32,16,1,2,68,172,16,177,2,4,16,1097,116,97,255&m,m>>8&255,m>>16&255,m>>24&255);(b=0;c>b;^d="";(m=0;256>mc>b;++m,b+=2^h=4*[b]+[b+1]<<8)-32768);h=-32768>h?-32768:h>32767?32767:h,d+=String.fromCharCode(255&h,h>>8&255e+=d}e},get=~(^a=`getWave();a=("data:audio/wav;base64,"+btoa)a.preload="none",a.load(a},getBuffer=~null===d(d=Conxt);^b=`mixBuf,c=`waveSize,g=d.creaBuffer(2,`waveSize,44100e=g.getChannelData(0v=g.getChannelData(1h=x=~((^n=Da,f=0;c>h;^d=4*(b[4*h]+(b[4*h+1]<<8)-32768);if(d=-32768>d?-32768:d>32767?32767:d,e[h]=d/32768,d=4*(b[4*h+2]+(b[4*h+3]<<8)-32768d=-32768>d?-32768:d>32767?32767:d,v[h]=d/32768,h+=1,f+=1,0===f%1e333<Da-n)void x,0~(a(g,0;x,0,S	=~,b`instr=a,`rowL=b||5605,`osc_lfo=e[a.lfo_wavem],`osc1=e[a.osc1_wavem],`osc2=e[a.osc2_wavem],`attack=a.v_attack,`sustain=a.v_sustain,`release=a.v_release,`panFreq=Math.pow(2,a.fx_pan_freq-8)/`rowL,`lfoFreq=Math.pow(2,a.lfo_freq-8)/`rowL},SgS=~(b,c,d^g=e=n=.00390625*Math.pow(1.059463094,b+12*(osc1_oct-8)+osc1_det-128)*(1+8e-4*osc1_detune);b=.00390625*Math.pow(1.059463094,b+12*(osc2_oct-8)+osc2_det-128)*(1+8e-4*osc2_detune);(^p=fx_resonance/255,x=y=f=`attack+`sustain+`release-1;f>=0;--f^u=f+d,t=`osc_lfo(u*`lfoFreq)*lfo_amt/512+.5,z=1;f<`attack?z=f/`attack:f>=`attack+`sustain(z-=(f-`attack-`sustain)/`release);^k=n;lfo_osc1_freq(k+=tosc1_xv(k*=z*zg+=k;^w=`osc1(g)*osc1_vol;switch(k=b,osc2_xv(k*=z*ze+=k,w+=`osc2(e)*osc2_vol,noise_fader(w+=(2*Math.random()-1)*noise_fader*zw*=z/255,k=fx_freq,lfo_fx_freq(k*=tk=1.5*Math.sin(3.141592*k/44100x+=k*y,t=p*(w-y)-x,y+=k*t,fx_filrcase 1:w=t 2:w=x 3:w=y 4:w=x+t}k=a(u*`panFreq)*fx_pan_amt/512+.5,w*=39*v_masr,u*=4,u+3<c(t=c[u]+(c[u+1]<<8)+w*(1-kc[u]=255&t,c[u+1]=t>>8&255,t=c[u+2]+(c[u+3]<<8)+w*k,c[u+2]=255&t,c[u+3]=t>>8&255},Sget	=~,d^g=`attack+`sustain+`release-1+32*`rowL,e=this;b(g,~(be.gS,b,0c(b,g,e.instr,e.rowL,~(d(	(b),Screa=~,b`get	,~b.get(),ScreaBuffer=~,b`get	,~a.getBuffer(b,Music	=~`song=a,`waveSize=44100*a.songL},MusicgeraTrack=~,d,e^g=this;b(`waveSize,~(b^n=g.waveSize,h=4*g.waveSize,m=g.song.rowL,p=g.song.dPatrn,f=S	,mu=t=r=k=~((^c=Da;;)if(32===r)r=t+=1;else{if(t===p-1w,0);break}^d=a.p[t];if(d(d=a.c[d-1].n[r])f.gS(d,b,uu+=m,r+=1,33<Da-ck,0);break}}},w=~(c(b,n,a,m,L,B=L=~((^a=Da,c=0;h>B;^f=d[B]+(d[B+1]<<8)+b[B]+(b[B+1]<<8)-32768;if(d[B]=255&f,d[B+1]=f>>8&255,B+=2,c+=1,0===c%1e333<Da-a)void L,0e,0;k,0,Musicget	=~^c=this;b(`waveSize,~(b^d=e=~(d<c.song.songData?(d+=1,c.geraTrack(c.song.songData[d-1],b,e)):a(	(b);e(,Musiccrea=~`get	(~(ba(b.get(),MusiccreaBuffer=~`get	(~(bb.getBuffer}();^DHTMLSpri=~^b=a.w,c=a.h,d=a.iW,e=a.t.appdChild(crea("div")g=e.style,n=Math.floor,p=[],m=[],r=v=h=x=0;css(e,{position:"absolu",left:"-9999px",width:b+"px",height:c+"px",backgrImage:"url("+a.img+")"});^y={diff:~,br=a,v=b},aA:~p=a},dw:~,bg.left=a+"px",g.top=b+"px"},bI:~x=a,y.cI(x,cI:~a*=b;^e=-n/d)*c;g.backgrPosition=-a%d+"px "+e+"px"},cA:~p[a](m=p[a],i:~(x},sh:~(g.display="block"},hi:~(g.display="none"},k:~(remove(e,mv:~a(y.cI(x+m[n(h)]h+=a/1e3*p.v,h>=m(h=0),v:~(p.v},dxy:~(return[r/50v/500]}};y},EVT_PLAYER_ENDED_MOVE=EVT_ENEMY_ENDED_MOVE=1,STATE_TITLE_SCREEN=2,STATE_PLAYING=3,STATE_STANDBY=4,STATE_INITIALIZATION=5,EVT_PLAYER_DAMAGE=6,STATE_GAMEOVER=7,EVT_WALL_DESTROYED=8,STATE_INIT_MUSIC=9,INIT_LEVEL=1,storyline="Scavge  survival;Oops. I am not alone;Obstacles are the key;Nude ones are short sighd;I can destroy obstacles too;Brown jackets are trouble;Each move counts;Harder than I thought;I ha Zetas;It\'s a long way to the top".split(";"cagories="Burguer meat;Zombie fodder;Novice;Inexpericed;Second ra;Mediocre;Handy;Skilled;Old timer;Veran;Seasoned pro;Superb;Outstanding;Masr".split(";"SYS_spriParams={w:32,h:32,iW:256,img:"s3.png",t:$("scre",columns=8,rows=8,level=2,scre,score,title,oldTime,floorTiles=[31],wallTiles=[25,26,27,28,29,30],ourWallTiles=[21,22,23,24],foodTiles=[18,19],emyTiles=[6,12],emyHit=[230],emyAI=[3,4],board=[],o=[],emies=[],gridPositions=[],p,dection,emiesToMove=[],initialEnergy=25,,maxEnergy,isPMoving=!1,isPTurn=!=null,isEnemyMoving=!1,animating=!1,gameIsOver=!1,INIT_MUSIC,FRUIT_ENERGY=12,SODA_ENERGY=2sLib=[],raf=window.requestAnimationFrame,ss=[[202665034572859995026,,-.0108,-.4073,,,,54371787558,908298091312,-.4545005500254],[31431093947030071,-.199934240685,-.28,0233,-.0799,0104440327022112,-.1832],[3,355325821909,2963,,,,,,,,3,-.0396,1,,,,18],[0878,45722507,2093,14373611,,5666,,,,,1,,,,3],[.34262423,,1232146624,19299,,,-1,1,-.8,-.0433,-.02,,,-136],[3017190783427412551810587,-.109948403174421,-.4199566104900662124,-.8404,-.19553985,-.0415,0212,-.043932]],keys=[0];documt.onkeyup=documt.onkeydown=~a.prevtDefault();^b=a.keyCode-37;"keyup"==a.type?(keys[b]=40==bswitchMusic()):keys[b]=1,gameIsOverpause(INITIALIZATION,1e3,title=$("title"scre=$("scre"pause(~(initS(INITIALIZATION},500gameLoop();~function`this.^var @"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[	.prototype.layer;break;casereturn setTimeout(){),</p>",scre.style.display="none",title.style.display="block",teen`instr.sonantx.gameSta=STATE_=DHTMLSpri(SYS_spriParams(acurrtEnergyAudio&&bjectsound	Gerator.lgth0,isPDecdBy,.)}forrandomRangenew ';for(Y in $="	@^`~")with(_.split($[Y]))_=join(pop());eval(_)